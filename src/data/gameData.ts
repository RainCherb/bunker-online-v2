import { Bunker, Catastrophe, Characteristics } from '@/types/game';

export const CATASTROPHES: Catastrophe[] = [
  {
    name: 'Ядерная война',
    description: 'Глобальный ядерный конфликт уничтожил большую часть человечества. Радиоактивные осадки покрывают поверхность земли, делая её непригодной для жизни на ближайшие десятилетия.',
    severity: 'critical',
  },
  {
    name: 'Зомби-апокалипсис',
    description: 'Неизвестный вирус превращает людей в агрессивных зомби. Инфицированные атакуют всех живых, распространяя заразу укусами.',
    severity: 'critical',
  },
  {
    name: 'Падение астероида',
    description: 'Гигантский астероид столкнулся с Землёй, вызвав глобальные цунами и ядерную зиму. Температура резко падает, солнечный свет не проникает сквозь пылевую завесу.',
    severity: 'critical',
  },
  {
    name: 'Пандемия смертельного вируса',
    description: 'Мутировавший вирус с 95% летальностью распространился по всему миру. Выжившие должны избегать любого контакта с внешним миром.',
    severity: 'severe',
  },
  {
    name: 'Восстание машин',
    description: 'Искусственный интеллект вышел из-под контроля и начал уничтожение человечества. Дроны и роботы патрулируют улицы в поисках выживших.',
    severity: 'severe',
  },
  {
    name: 'Глобальное наводнение',
    description: 'Резкое таяние ледников привело к подъёму уровня моря на 50 метров. Большинство городов затоплены, суша стремительно сокращается.',
    severity: 'severe',
  },
  {
    name: 'Солнечная вспышка',
    description: 'Мощнейшая солнечная вспышка уничтожила всю электронику на Земле и вызвала смертельные радиационные бури. Находиться на поверхности крайне опасно.',
    severity: 'severe',
  },
  {
    name: 'Инопланетное вторжение',
    description: 'Внеземная цивилизация начала колонизацию Земли. Их технологии намного превосходят наши, сопротивление бесполезно.',
    severity: 'critical',
  },
];

export const BUNKERS: Bunker[] = [
  {
    name: 'Бункер "Убежище-7"',
    location: 'Уральские горы, глубина 200м',
    size: '450 кв.м',
    stayDuration: '2 года',
    foodSupply: 'Консервы на 2 года для 6 человек',
    items: ['Генератор', 'Система очистки воздуха', 'Медпункт', 'Библиотека', 'Радиостанция'],
  },
  {
    name: 'Бункер "Ковчег"',
    location: 'Швейцарские Альпы, глубина 150м',
    size: '600 кв.м',
    stayDuration: '3 года',
    foodSupply: 'Гидропонная ферма + запас на 6 месяцев',
    items: ['Солнечные батареи', 'Медицинская лаборатория', 'Мастерская', 'Спортзал', 'Системы видеонаблюдения'],
  },
  {
    name: 'Бункер "Новый Эдем"',
    location: 'Аляска, подземный комплекс',
    size: '800 кв.м',
    stayDuration: '5 лет',
    foodSupply: 'Криогенное хранилище + животноводческий сектор',
    items: ['Ядерный реактор', 'Система переработки отходов', 'Школа', 'Теплицы', 'Арсенал'],
  },
];

export const GENDERS: string[] = [
  'Мужчина, 25 лет',
  'Женщина, 30 лет',
  'Мужчина, 45 лет',
  'Женщина, 22 года',
  'Мужчина, 35 лет',
  'Женщина, 40 лет',
  'Мужчина, 55 лет',
  'Женщина, 28 лет',
  'Небинарная персона, 32 года',
  'Мужчина, 19 лет',
  'Женщина, 50 лет',
  'Мужчина, 60 лет',
  'Женщина, 35 лет',
  'Мужчина, 42 года',
  'Женщина, 18 лет',
];

export const BODIES: string[] = [
  'Атлетическое',
  'Худощавое',
  'Полное',
  'Среднее',
  'Мускулистое',
  'Хрупкое',
  'Массивное',
  'Гибкое',
  'Крепкое',
  'Астеническое',
];

export const TRAITS: string[] = [
  'Оптимист',
  'Пессимист',
  'Лидер',
  'Интроверт',
  'Экстраверт',
  'Параноик',
  'Альтруист',
  'Эгоист',
  'Хладнокровный',
  'Эмоциональный',
  'Манипулятор',
  'Честный до наивности',
  'Мнительный',
  'Решительный',
  'Осторожный',
];

export const PROFESSIONS: string[] = [
  'Врач-хирург',
  'Программист',
  'Военный офицер',
  'Фермер',
  'Психолог',
  'Инженер-механик',
  'Учитель',
  'Шеф-повар',
  'Архитектор',
  'Медсестра',
  'Электрик',
  'Ветеринар',
  'Химик',
  'Охотник',
  'Священник',
  'Безработный',
  'Блогер',
  'Политик',
  'Спортсмен',
  'Музыкант',
];

export const HEALTH_CONDITIONS: string[] = [
  'Абсолютно здоров',
  'Лёгкая близорукость',
  'Аллергия на пыльцу',
  'Хроническая астма',
  'Диабет 2 типа',
  'Сломана рука (в гипсе)',
  'Глухота на одно ухо',
  'Эпилепсия',
  'ВИЧ-инфицирован',
  'Беременность 7 месяцев',
  'Отсутствует одна почка',
  'Сердечная недостаточность',
  'Психическое расстройство',
  'Отличное здоровье, спортсмен',
  'Онкология в ремиссии',
];

export const HOBBIES: string[] = [
  'Садоводство',
  'Охота',
  'Программирование',
  'Рукоделие',
  'Боевые искусства',
  'Чтение',
  'Кулинария',
  'Музыка',
  'Медитация',
  'Рыбалка',
  'Выживание в дикой природе',
  'Коллекционирование оружия',
  'Йога',
  'Механика',
  'Игра в покер',
];

export const PHOBIAS: string[] = [
  'Клаустрофобия',
  'Арахнофобия',
  'Социофобия',
  'Никтофобия (боязнь темноты)',
  'Агорафобия',
  'Гемофобия (боязнь крови)',
  'Акрофобия (боязнь высоты)',
  'Пирофобия',
  'Танатофобия (боязнь смерти)',
  'Нет выраженных фобий',
  'Аквафобия',
  'Зоофобия',
  'Мизофобия (боязнь грязи)',
  'Трипофобия',
  'Иатрофобия (боязнь врачей)',
];

export const BIG_INVENTORY: string[] = [
  'Генератор на солнечных батареях',
  'Ящик консервов на месяц',
  'Набор хирургических инструментов',
  'Арбалет с запасом стрел',
  'Палатка на 4 человека',
  'Рация дальнего действия',
  'Бочка питьевой воды (200л)',
  'Набор семян различных культур',
  'Защитный костюм от радиации',
  'Огнестрельное оружие + патроны',
  'Аптечка экстренной помощи',
  'Инструменты для ремонта',
  'Надувная лодка',
  'Запас топлива (50л)',
  'Сейф с документами и деньгами',
];

export const BACKPACK: string[] = [
  'Нож выживания',
  'Аптечка первой помощи',
  'Фонарик + батарейки',
  'Верёвка 20м',
  'Спальный мешок',
  'Фильтр для воды',
  'Компас + карта',
  'Сухой паёк на неделю',
  'Зажигалка + спички',
  'Многофункциональный инструмент',
  'Бинокль',
  'Газовая горелка',
  'Запасная одежда',
  'Документы + деньги',
  'Книга по выживанию',
];

export const ADDITIONAL_INFO: string[] = [
  'Знает 5 иностранных языков',
  'Бывший заключённый',
  'Имеет двойное гражданство',
  'Страдает игровой зависимостью',
  'Вегетарианец со стажем',
  'Бывший спецназовец',
  'Имеет учёную степень',
  'Религиозный фанатик',
  'Знаменитость в прошлом',
  'Не умеет плавать',
  'Владеет боевыми искусствами',
  'Имеет криминальные связи',
  'Гений математики',
  'Страдает бессонницей',
  'Бывший донор органов',
];

export const SPECIAL_ABILITIES: string[] = [
  'Может узнать одну характеристику любого игрока',
  'Может защитить себя от одного голосования',
  'Может поменяться одной характеристикой с другим игроком',
  'Может заставить игрока раскрыть все характеристики',
  'Может отменить голосование один раз',
  'Может вернуть одного изгнанного игрока',
  'Может голосовать дважды один раз за игру',
  'Может скрыть одну свою характеристику до конца игры',
  'Может узнать за кого голосовал любой игрок',
  'Может пропустить один раунд голосования без последствий',
];

export function generateRandomCharacteristics(): Characteristics {
  const getRandom = <T>(arr: T[]): T => arr[Math.floor(Math.random() * arr.length)];
  
  return {
    gender: getRandom(GENDERS),
    body: getRandom(BODIES),
    trait: getRandom(TRAITS),
    profession: getRandom(PROFESSIONS),
    health: getRandom(HEALTH_CONDITIONS),
    hobby: getRandom(HOBBIES),
    phobia: getRandom(PHOBIAS),
    bigInventory: getRandom(BIG_INVENTORY),
    backpack: getRandom(BACKPACK),
    additionalInfo: getRandom(ADDITIONAL_INFO),
    specialAbility: getRandom(SPECIAL_ABILITIES),
  };
}

export function getRandomCatastrophe(): Catastrophe {
  return CATASTROPHES[Math.floor(Math.random() * CATASTROPHES.length)];
}

export function getRandomBunker(): Bunker {
  return BUNKERS[Math.floor(Math.random() * BUNKERS.length)];
}

export function calculateBunkerSlots(playerCount: number): number {
  return Math.floor(playerCount / 2);
}

export function getCharacteristicsToReveal(round: number, playerCount: number): number {
  if (playerCount <= 6) {
    if (round === 1) return 3;
    if (round === 2) return 3;
    if (round === 3) return 2;
    return 0;
  }
  if (playerCount <= 8) {
    if (round === 1) return 3;
    if (round === 2) return 2;
    if (round === 3) return 2;
    return 1;
  }
  if (playerCount <= 10) {
    if (round === 1) return 3;
    if (round === 2) return 2;
    if (round === 3) return 1;
    return 1;
  }
  if (playerCount <= 12) {
    if (round === 1) return 2;
    if (round === 2) return 2;
    if (round === 3) return 1;
    return 1;
  }
  // 13-15 players
  if (round === 1) return 2;
  if (round === 2) return 1;
  return 1;
}
